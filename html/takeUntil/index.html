<!DOCTYPE html>
<html>
  <head>
    <title>Hello!</title>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="../rxjs.js"></script>
    <script src="./canvas.js" type="module" defer></script>
    <style>
      .unselectable {
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
      }
    </style>
  </head>
  <body>
    <div
      class="unselectable"
      style="text-align: center; position: absolute; top: 40%; left: 30%"
    >
      <h2>RxJS</h2>
    </div>
    <canvas class="my-canvas"></canvas>
    <script type="module">
      import { paint } from "./canvas.js";
      const {
        operators: { takeUntil, mergeMap },
        fromEvent,
      } = rxjs;

      const down$ = fromEvent(document, "mousedown");
      const move$ = fromEvent(document, "mousemove");
      const up$ = fromEvent(document, "mouseup");

      const paints$ = down$.pipe(mergeMap(down => move$.pipe(takeUntil(up$))));
      //此时的流为 MouseEvent
      paints$.subscribe(paint);
    </script>
  </body>
</html>
